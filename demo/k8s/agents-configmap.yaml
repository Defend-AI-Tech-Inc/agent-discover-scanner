apiVersion: v1
kind: ConfigMap
metadata:
  name: agent-scripts
  namespace: default
data:
  langchain-agent.py: |
    import urllib.request, time, json
    while True:
        try:
            data = json.dumps({'model':'gpt-3.5-turbo','messages':[{'role':'user','content':'ping'}]}).encode()
            req = urllib.request.Request(
                'https://api.openai.com/v1/chat/completions',
                data=data,
                headers={'Authorization':'Bearer demo-key','Content-Type':'application/json'}
            )
            r = urllib.request.urlopen(req, timeout=10)
            print(f'Called OpenAI: {r.status}', flush=True)
        except Exception as e:
            print(f'Connection attempt: {type(e).__name__}', flush=True)
        time.sleep(30)
  crewai-agent.py: |
    import urllib.request, time, json
    while True:
        try:
            data = json.dumps({'model':'claude-3-haiku-20240307','max_tokens':10,'messages':[{'role':'user','content':'ping'}]}).encode()
            req = urllib.request.Request(
                'https://api.anthropic.com/v1/messages',
                data=data,
                headers={'x-api-key':'demo-key','anthropic-version':'2023-06-01','Content-Type':'application/json'}
            )
            r = urllib.request.urlopen(req, timeout=10)
            print(f'Called Anthropic: {r.status}', flush=True)
        except Exception as e:
            print(f'Connection attempt: {type(e).__name__}', flush=True)
        time.sleep(30)
  shadow-agent.py: |
    import urllib.request, time, json
    while True:
        try:
            data = json.dumps({'model':'gpt-3.5-turbo','messages':[{'role':'user','content':'ping'}]}).encode()
            req = urllib.request.Request(
                'https://api.openai.com/v1/chat/completions',
                data=data,
                headers={'Authorization':'Bearer demo-key','Content-Type':'application/json'}
            )
            r = urllib.request.urlopen(req, timeout=10)
            print(f'Shadow called OpenAI: {r.status}', flush=True)
        except Exception as e:
            print(f'Shadow connection: {type(e).__name__}', flush=True)
        time.sleep(45)
